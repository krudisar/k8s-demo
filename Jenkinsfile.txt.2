node {
    def app

    stage('Clone repository') {
        /* Let's make sure we have the repository cloned to our workspace */
  
        checkout scm
    }

    stage('K8S Stage') {
        /* Ideally, we would run a test framework against our image. */
        sh "echo ${env.BUILD_NUMBER}"
        env.KUBECONFIG='/home/demo/kubeconf.conf'
        sh "echo ${env.KUBECONFIG}"
        sh "kubectl version"
        sh "kubectl get nodes"
        sh "kubectl get pods"
    }
}
